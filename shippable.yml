language: scala

scala:
  - 2.11.2

env:
  global:
    - secure: S+TW6LF17aFRhncEU8ctuBPGwAKASUr2XIsOjd+VsMGfSwGU1Puvb/YZKVUAU9metRjDAO58tdyA5yPyCsjYftBRxp2gl29Hd3vFdZBKeRmBP+/gqe7yKu1QdAOMeNeT6lcvR7rgrr2fuZlf7PLbfFbcY5ZJQXRxoQB1vx043bMUV1k/XRn3PKVVB6JlYyzxl+yw6qiluzo+6V9JTohvJDG7y9+NRulIMnDSRU5GluHKwoXO2UqcGi0Qy897jStsMUHjBq9Bm9isQ33t8RM+tQpx6OOb/Nx6LbvjdEPnwk3iTUm+iP1rWOV5TLyHvhDAqNwMZZvsgvf0hdQFU9XQsQ==

before_script:
  - unset TRAVIS_JOB_ID # to force coveralls to use token

script:
  - export SBT_OPTS="-XX:+CMSClassUnloadingEnabled -XX:PermSize=256M -XX:MaxPermSize=512M"
  - sbt clean coveralls

after_script:
  # copy test & coverage results for shippable to pars them
  - mkdir -p $PWD/shippable/codecoverage/; cp core/target/scala-2.11/coverage-report/cobertura.xml $_
  - mkdir -p $PWD/shippable/testresults/; cp core/target/scala-2.11/test-reports/*.xml $_

notifications:
  email:
    recipients:
      - tgrobel@gmail.com
    on_success: change
    on_failure: always